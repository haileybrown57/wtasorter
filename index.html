<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WTA Top 100 Sorter</title>

  <style>
    body {
      margin: 0;
      font-family: "Times New Roman", serif;
      color: #000;
      background: #fff;
    }

    .wrap {
      max-width: 900px;
      margin: 30px auto;
      padding: 0 16px 40px;
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
    }

    h1 {
      margin: 0 0 10px;
      font-size: 28px;
      letter-spacing: 0.5px;
    }

    .instructions {
      margin: 0;
      font-size: 18px;
      line-height: 1.45;
    }

    .status {
      text-align: center;
      margin: 24px 0 16px;
      font-size: 22px;
      font-weight: bold;
    }

    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 14px 10px;
    }

    td {
      border: 2px solid #000;
      text-align: center;
      vertical-align: middle;
      background: #fff;
    }

    /* === CRITICAL FIX: FORCE TEXT TO BE VISIBLE === */
    .choice,
    .middle {
      color: #000 !important;
      font-size: 20px !important;
      background: #fff !important;
      position: relative;
      z-index: 1;
    }

    .choice {
      width: 42%;
      height: 180px;
      cursor: pointer;
      padding: 14px;
      user-select: none;
    }

    .middle {
      width: 16%;
      height: 80px;
      cursor: pointer;
      padding: 10px;
      user-select: none;
      font-size: 18px !important;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 14px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    button {
      font: inherit;
      font-size: 18px;
      border: 2px solid #000;
      background: #fff;
      padding: 10px 16px;
      cursor: pointer;
    }

    button:hover {
      background: #f0f0f0;
    }

    .results {
      margin-top: 30px;
      text-align: center;
    }

    .results table {
      width: 420px;
      margin: 0 auto;
      border-collapse: collapse;
      font-size: 18px;
    }

    .results th,
    .results td {
      border: 2px solid #000;
      padding: 8px 10px;
    }

    .results th {
      background: #e097d9;
      color: #fff;
    }

    .footer {
      text-align: center;
      margin-top: 30px;
      font-size: 14px;
      opacity: 0.85;
    }

    @media (max-width: 600px) {
      .choice {
        height: 140px;
        font-size: 18px !important;
      }
      .middle {
        font-size: 16px !important;
      }
      .results table {
        width: 100%;
      }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="header">
      <h1>WTA TOP 100 SORTER</h1>
      <p class="instructions">
        Pick the player you prefer in each matchup to generate your personal ranking.<br>
        Note: frequent ties or “no opinion” will reduce ranking precision.
      </p>
    </div>

    <div id="battleNumber" class="status">battle #1</div>

    <table role="presentation">
      <tr>
        <td id="leftField" class="choice" rowspan="2"></td>
        <td id="bothBtn" class="middle">I like both</td>
        <td id="rightField" class="choice" rowspan="2"></td>
      </tr>
      <tr>
        <td id="noOpinionBtn" class="middle">no opinion</td>
      </tr>
    </table>

    <div class="controls">
      <button id="resetBtn" type="button">Reset</button>
      <button id="shuffleBtn" type="button">Shuffle &amp; Reset</button>
    </div>

    <div id="resultField" class="results"></div>

    <div class="footer">
      Top 100 WTA singles sorter (hosted on GitHub Pages, embedded in Tumblr).
    </div>
  </div>

  <script>
    /* === TOP 100 WTA PLAYERS === */
    var namMember = [
      "Aryna Sabalenka","Iga Swiatek","Coco Gauff","Amanda Anisimova","Elena Rybakina",
      "Jessica Pegula","Madison Keys","Jasmine Paolini","Mirra Andreeva","Ekaterina Alexandrova",
      "Belinda Bencic","Clara Tauson","Linda Noskova","Elina Svitolina","Emma Navarro",
      "Naomi Osaka","Liudmila Samsonova","Victoria Mboko","Karolina Muchova","Elise Mertens",
      "Diana Shnaider","Leylah Fernandez","Jelena Ostapenko","Qinwen Zheng","Paula Badosa",
      "Marta Kostyuk","Dayana Yastremska","Sofia Kenin","Emma Raducanu","Veronika Kudermetova",
      "McCartney Kessler","Maya Joint","Anna Kalinskaya","Marketa Vondrousova","Iva Jovic",
      "Lois Boisson","Daria Kasatkina","Ann Li","Jaqueline Cristian","Eva Lys",
      "Jessica Bouzas Maneiro","Marie Bouzkova","Sorana Cirstea","Ashlyn Krueger","Tatjana Maria",
      "Laura Siegemund","Anastasia Pavlyuchenkova","Katerina Siniakova","Emiliana Arango",
      "Anastasia Potapova","Cristina Bucsa","Maria Sakkari","Alexandra Eala","Magda Linette",
      "Elsa Jacquemot","Janice Tjen","Xinyu Wang","Beatriz Haddad Maia","Magdalena Frech",
      "Tereza Valentova","Hailey Baptiste","Anna Blinkova","Peyton Stearns","Danielle Collins",
      "Barbora Krejcikova","Solana Sierra","Olga Danilovic","Sonay Kartal","Donna Vekic",
      "Antonia Ruzic","Yulia Putintseva","Rebecca Sramkova","Francesca Jones","Anna Bondar",
      "Ons Jabeur","Varvara Gracheva","Camila Osorio","Alycia Parks","Renata Zarazua",
      "Ajla Tomljanovic","Shuai Zhang","Viktorija Golubic","Elisabetta Cocciaretto","Petra Marcinko",
      "Caty McNally","Ella Seidel","Simona Waltert","Elena-Gabriela Ruse","Suzan Lamens",
      "Lulu Sun","Panna Udvardy","Sara Bejlek","Katie Volynets","Moyuka Uchijima",
      "Julia Grabher","Oleksandra Oliynykova","Kamilla Rakhimova","Kimberly Birrell",
      "Dalma Galfi","Oksana Selekhmeteva"
    ];

    /* === SORTER ENGINE === */
    let lstMember=[], parent=[], equal=[], rec=[];
    let cmp1, cmp2, head1, head2, nrec;
    let numQuestion, finishFlag;

    function initList(){
      lstMember=[]; parent=[]; equal=[]; rec=[];
      let n=0;
      lstMember[n]=[];
      for(let i=0;i<namMember.length;i++) lstMember[n][i]=i;
      parent[n]=-1; n++;

      for(let i=0;i<lstMember.length;i++){
        if(lstMember[i].length>=2){
          let mid=Math.ceil(lstMember[i].length/2);
          lstMember[n]=lstMember[i].slice(0,mid); parent[n++]=i;
          lstMember[n]=lstMember[i].slice(mid); parent[n++]=i;
        }
      }

      for(let i=0;i<=namMember.length;i++) equal[i]=-1;
      cmp1=lstMember.length-2; cmp2=lstMember.length-1;
      head1=0; head2=0; nrec=0;
      numQuestion=1; finishFlag=0;
      showImage();
    }

    function sortList(flag){
      if(finishFlag) return;

      function push(v){ rec[nrec++]=v; }

      if(flag<0) push(lstMember[cmp1][head1++]);
      else if(flag>0) push(lstMember[cmp2][head2++]);
      else {
        push(lstMember[cmp1][head1++]);
        equal[rec[nrec-1]]=lstMember[cmp2][head2];
        push(lstMember[cmp2][head2++]);
      }

      if(head1===lstMember[cmp1].length && head2===lstMember[cmp2].length){
        for(let i=0;i<rec.length;i++) lstMember[parent[cmp1]][i]=rec[i];
        lstMember.pop(); lstMember.pop();
        cmp1-=2; cmp2-=2;
        head1=0; head2=0; rec=[]; nrec=0;
      }

      if(cmp1<0){
        showResult();
        finishFlag=1;
      } else showImage();
    }

    function showImage(){
      document.getElementById("battleNumber").textContent="battle #"+numQuestion++;
      document.getElementById("leftField").textContent=namMember[lstMember[cmp1][head1]];
      document.getElementById("rightField").textContent=namMember[lstMember[cmp2][head2]];
    }

    function showResult(){
      let html="<table><tr><th>Rank</th><th>Player</th></tr>";
      for(let i=0;i<namMember.length;i++){
        html+="<tr><td>"+(i+1)+"</td><td>"+namMember[lstMember[0][i]]+"</td></tr>";
      }
      html+="</table>";
      document.getElementById("resultField").innerHTML=html;
      document.getElementById("battleNumber").textContent="Complete!";
    }

    leftField.onclick=()=>sortList(-1);
    rightField.onclick=()=>sortList(1);
    bothBtn.onclick=noOpinionBtn.onclick=()=>sortList(0);
    resetBtn.onclick=()=>initList();
    shuffleBtn.onclick=()=>{ namMember.sort(()=>Math.random()-0.5); initList(); };

    initList();
  </script>
</body>
</html>
